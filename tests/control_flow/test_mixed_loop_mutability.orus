// Test automatic mutability in mixed loop types
print("=== Mixed Loop Mutability Test ===")

mut for_iterations = 0
mut for_var_total = 0

// For loop with auto-mutable variables
print("1. For loop:")
for i in 0..1:
    for_var = 5
    for_var = for_var + 10  // Auto-mutable
    print("  For loop var:", for_var)
    for_iterations = for_iterations + 1
    for_var_total = for_var_total + for_var

mut while_iterations = 0
mut while_var_total = 0

// While loop with auto-mutable variables
print("2. While loop:")
mut count = 0
while count < 1:
    while_var = 20
    while_var = while_var * 2  // Auto-mutable
    print("  While loop var:", while_var)
    while_iterations = while_iterations + 1
    while_var_total = while_var_total + while_var
    count = count + 1

mut nested_for_iterations = 0
mut nested_while_iterations = 0
mut nested_var_total = 0

// Nested for-while with auto-mutable variables
print("3. Nested for-while:")
for x in 0..1:
    nested_for_iterations = nested_for_iterations + 1
    mut y = 0
    while y < 1:
        nested_var = 100
        nested_var = nested_var + 50  // Auto-mutable in nested context
        print("  Nested var:", nested_var)
        nested_while_iterations = nested_while_iterations + 1
        nested_var_total = nested_var_total + nested_var
        y = y + 1

print("All loop types support auto-mutability!")

if assert_eq("test_mixed_loop_mutability for_iterations", for_iterations, 1):
    print("ok", "for_iterations", for_iterations)
if assert_eq("test_mixed_loop_mutability for_var_total", for_var_total, 15):
    print("ok", "for_var_total", for_var_total)
if assert_eq("test_mixed_loop_mutability while_iterations", while_iterations, 1):
    print("ok", "while_iterations", while_iterations)
if assert_eq("test_mixed_loop_mutability while_var_total", while_var_total, 40):
    print("ok", "while_var_total", while_var_total)
if assert_eq("test_mixed_loop_mutability count", count, 1):
    print("ok", "count", count)
if assert_eq("test_mixed_loop_mutability nested_for_iterations", nested_for_iterations, 1):
    print("ok", "nested_for_iterations", nested_for_iterations)
if assert_eq("test_mixed_loop_mutability nested_while_iterations", nested_while_iterations, 1):
    print("ok", "nested_while_iterations", nested_while_iterations)
if assert_eq("test_mixed_loop_mutability nested_var_total", nested_var_total, 150):
    print("ok", "nested_var_total", nested_var_total)
