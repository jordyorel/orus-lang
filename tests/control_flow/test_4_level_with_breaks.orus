// 4-level with breaks/continues
print("4-level with breaks test:")

mut level1_count = 0
mut level2_count = 0
mut level2_skips = 0
mut level3_count = 0
mut level3_skips = 0
mut level4_iterations = 0
mut level4_processing = 0

for i in 0..2:
    print("Level 1: i =", i)
    level1_count = level1_count + 1

    mut j = 0
    while j < 3:
        j = j + 1
        print("  Level 2: j =", j)
        level2_count = level2_count + 1

        if j == 2:
            print("    Level 2 continue")
            level2_skips = level2_skips + 1
            continue

        for k in 0..3:
            print("    Level 3: k =", k)
            level3_count = level3_count + 1

            if k == 1:
                print("      Level 3 continue")
                level3_skips = level3_skips + 1
                continue

            mut l = 0
            while l < 2:
                l = l + 1
                print("      Level 4: l =", l)
                level4_iterations = level4_iterations + 1

                if l == 1 and k == 0:
                    print("        Level 4 continue")
                    continue

                print("        Level 4 processing")
                level4_processing = level4_processing + 1
            print("      Level 4 done")
        print("    Level 3 done")
    print("  Level 2 done")
print("All done")

if assert_eq("test_4_level_with_breaks level1_count", level1_count, 2):
    print("ok", "level1_count", level1_count)
if assert_eq("test_4_level_with_breaks level2_count", level2_count, 6):
    print("ok", "level2_count", level2_count)
if assert_eq("test_4_level_with_breaks level2_skips", level2_skips, 2):
    print("ok", "level2_skips", level2_skips)
if assert_eq("test_4_level_with_breaks level3_count", level3_count, 12):
    print("ok", "level3_count", level3_count)
if assert_eq("test_4_level_with_breaks level3_skips", level3_skips, 4):
    print("ok", "level3_skips", level3_skips)
if assert_eq("test_4_level_with_breaks level4_iterations", level4_iterations, 16):
    print("ok", "level4_iterations", level4_iterations)
if assert_eq("test_4_level_with_breaks level4_processing", level4_processing, 12):
    print("ok", "level4_processing", level4_processing)
