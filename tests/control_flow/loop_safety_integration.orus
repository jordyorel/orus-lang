// Comprehensive Loop Optimization Test Suite
// Tests the high-performance loop optimization framework

print("=== Loop Optimization Test Suite ===")

// Test 1: Basic unrolling - small constant loop
print("Test 1: Basic unrolling (1..4)")
mut test1_count = 0
for i in 1..4:
    print("Unrolled:", i)
    test1_count = test1_count + 1
print("Test 1 done")

// Test 2: Single iteration - should be unrolled
print("Test 2: Single iteration (5..6)")
mut test2_count = 0
for i in 5..6:
    print("Single:", i)
    test2_count = test2_count + 1
print("Test 2 done")

// Test 3: Two iterations - should be unrolled
print("Test 3: Two iterations (0..2)")
mut test3_count = 0
for i in 0..2:
    print("Two:", i)
    test3_count = test3_count + 1
print("Test 3 done")

// Test 4: Step loop - should be unrolled
print("Test 4: Step loop (0..6..2)")
mut test4_count = 0
for i in 0..6..2:
    print("Step:", i)
    test4_count = test4_count + 1
print("Test 4 done")

// Test 5: Large step - should be unrolled
print("Test 5: Large step (10..50..10)")
mut test5_count = 0
for i in 10..50..10:
    print("Large step:", i)
    test5_count = test5_count + 1
print("Test 5 done")

// Test 6: Loop with break - should NOT be unrolled
print("Test 6: Loop with break (1..10)")
mut test6_count = 0
for i in 1..10:
    if i == 3:
        break
    print("Break test:", i)
    test6_count = test6_count + 1
print("Test 6 done")

// Test 7: Loop with continue - should NOT be unrolled
print("Test 7: Loop with continue (1..5)")
mut test7_count = 0
for i in 1..5:
    if i == 3:
        continue
    print("Continue test:", i)
    test7_count = test7_count + 1
print("Test 7 done")

// Test 8: Nested loops - inner should be unrolled
print("Test 8: Nested loops")
mut nested_inner_count = 0
for i in 1..3:
    print("Outer:", i)
    for j in 1..3:
        print("  Inner:", j)
        nested_inner_count = nested_inner_count + 1
print("Test 8 done")

// Test 9: Large loop - should NOT be unrolled
print("Test 9: Large loop (1..15)")
mut test9_count = 0
for i in 1..15:
    print("Large:", i)
    test9_count = test9_count + 1
print("Test 9 done")

// Test 10: Negative step - should be unrolled
print("Test 10: Negative step (10..6..-2)")
mut test10_count = 0
for i in 10..6..-2:
    print("Negative step:", i)
    test10_count = test10_count + 1
print("Test 10 done")

print("=== All Loop Optimization Tests Complete ===")
if assert_eq("loop_safety_integration test1_count", test1_count, 3):
    print("ok", "test1_count", test1_count)
if assert_eq("loop_safety_integration test2_count", test2_count, 1):
    print("ok", "test2_count", test2_count)
if assert_eq("loop_safety_integration test3_count", test3_count, 2):
    print("ok", "test3_count", test3_count)
if assert_eq("loop_safety_integration test4_count", test4_count, 3):
    print("ok", "test4_count", test4_count)
if assert_eq("loop_safety_integration test5_count", test5_count, 4):
    print("ok", "test5_count", test5_count)
if assert_eq("loop_safety_integration test6_count", test6_count, 2):
    print("ok", "test6_count", test6_count)
if assert_eq("loop_safety_integration test7_count", test7_count, 3):
    print("ok", "test7_count", test7_count)
if assert_eq("loop_safety_integration nested_inner_count", nested_inner_count, 4):
    print("ok", "nested_inner_count", nested_inner_count)
if assert_eq("loop_safety_integration test9_count", test9_count, 14):
    print("ok", "test9_count", test9_count)
if assert_eq("loop_safety_integration test10_count", test10_count, 2):
    print("ok", "test10_count", test10_count)